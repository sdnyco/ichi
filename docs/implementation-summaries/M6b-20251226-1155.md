# M6b — Availability (Place-Scoped Reachability Windows)

## Field Additions
- Added `place_profiles.isAvailabilityEnabled` (boolean, default `false`), `availabilityStartMinutes` / `availabilityEndMinutes` (nullable integers storing minutes since local midnight), and `availabilityTimeZone` (IANA string, default `"Europe/Berlin"`). Data stays place-scoped per `(user, place)`, with null minutes interpreted as “unset/unavailable”.

## Timezone Rule & Midnight Windows
- Availability windows are stored as wall-clock minutes plus `availabilityTimeZone`. We currently default all profiles to `"Europe/Berlin"` and document this MVP rule; evaluation converts `now` into that timezone via `Intl.DateTimeFormat`, so DST adjustments come “for free”. Windows where `start < end` are same-day, `start > end` wrap past midnight to the next day, and `start === end` is treated as invalid/unavailable.

## UI Entry Point
- The self-only `ExpandedProfileSheet` now includes an “Availability” card: toggle + `HH:MM` pickers. Users can enable/disable availability and adjust start/end in minutes-of-day; invalid or unset ranges show inline guidance but still persist safely.

## Query Helper for M6c
- Introduced `getAnchoredAndAvailableUserIdsForPlace(placeId, now, viewerUserId?)`, which filters anchored profiles by the new availability evaluator, enforces ban/blocks, and returns the user IDs ready for future reachability mechanics (pings/rate limits arrive in M6c).


