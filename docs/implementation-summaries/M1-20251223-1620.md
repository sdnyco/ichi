# M1 — Foundations Locked (Implementation Summary)
Date: 2025-12-23
Run: M1-20251223-1620

## Goal
Establish foundational project scaffolding (DB plumbing + i18n + route skeleton) without implementing product features.

## Implemented
- Added minimal i18n helper:
  - Locale dictionaries loaded from JSON
  - Locale inferred from `accept-language` header (de → `de-DE`, else `en-US`)
  - `t(locale, key, params)` with fallback to `en-US` and `{param}` interpolation
- Added minimal environment helper:
  - `getEnv()` accessor supports both `NEXT_PUBLIC_*` and non-prefixed env vars
- Added Supabase browser client factory:
  - Reads `SUPABASE_URL` and `SUPABASE_ANON_KEY` (publishable key) via `getEnv()`
  - No queries performed (instantiation only)
- Added place route skeleton:
  - `/place/[slug]` renders localized app title + slug
  - No DB calls, no Supabase calls
- Added guard comment in `src/db/schema.ts` indicating schema stays empty until M2.
- Hardened `getLocaleFromHeaders` to handle header sources without `.get();` default locale falls back to `en-US`.

## Files Added / Updated
- Added: `src/lib/i18n.ts`
- Added: `src/lib/env.ts`
- Added: `src/lib/supabase/client.ts`
- Added: `src/app/place/[slug]/page.tsx`
- Updated: `src/db/schema.ts`

## Behavioral Notes
- M1 intentionally contains no product features (no check-in, no gallery, no anchoring).
- i18n is JSON-based and minimal by design (no providers/middleware yet).

## Schema / DB Notes
- Drizzle schema intentionally empty in M1.
- `DATABASE_URL` uses Supabase pooler string for development.

## Known Issues / Follow-ups
- Consider standardizing env vars to `NEXT_PUBLIC_SUPABASE_URL` / `NEXT_PUBLIC_SUPABASE_ANON_KEY` before adding any browser-side Supabase queries.

## Next
Proceed to M2 (Place Read Path): introduce schema tables and read path for place + gallery.
